<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generador de URLs y Herramientas</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 16px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 600px;
        width: 100%;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 24px;
      }

      /* Tabs Navigation */
      .tabs-nav {
        display: flex;
        gap: 0;
        margin-bottom: 30px;
        border-bottom: 2px solid #e0e0e0;
        width: 100%;
      }

      .tab-btn {
        flex: 1;
        padding: 14px 16px;
        background: transparent;
        border: none;
        border-bottom: 3px solid transparent;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        color: #666;
        transition: all 0.3s;
        white-space: nowrap;
        text-align: center;
        min-width: 0;
      }

      .tab-btn:hover {
        color: #667eea;
        background: #f8f9fa;
      }

      .tab-btn.active {
        color: #667eea;
        border-bottom-color: #667eea;
        background: #f8f9fa;
      }

      /* Tab Content */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.3s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Input Groups */
      .input-group {
        margin-bottom: 30px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: #555;
        font-weight: 500;
        font-size: 14px;
      }

      input[type="text"] {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      input[type="text"]:focus {
        outline: none;
        border-color: #667eea;
      }

      /* Output Groups */
      .output-group {
        margin-bottom: 20px;
      }
      .output-item {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }

      /* SMS Sections with visual separation */
      .sms-section {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        border: 2px solid #e0e0e0;
      }

      .sms-section.en {
        background: #e8f4f8;
        border-color: #4fc3f7;
      }

      .sms-section.es {
        background: #fff3e0;
        border-color: #ffb74d;
      }

      .sms-section label {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
        font-weight: 600;
        font-size: 15px;
      }

      .sms-section.en label {
        color: #0277bd;
      }

      .sms-section.es label {
        color: #e65100;
      }

      .language-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .language-badge.en {
        background: #4fc3f7;
        color: white;
      }

      .language-badge.es {
        background: #ffb74d;
        color: white;
      }

      .output-item {
        display: flex;
        gap: 10px;
        margin-bottom: 0;
      }

      .output-field {
        flex: 1;
        padding: 12px 16px;
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        color: #333;
        font-family: "Courier New", monospace;
        word-break: break-all;
      }

      /* Buttons */
      .copy-btn {
        padding: 12px 20px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s;
        white-space: nowrap;
      }

      .copy-btn:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .copy-btn:active {
        transform: translateY(0);
      }

      .copy-btn.copied {
        background: #48bb78;
      }

      .copy-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      /* Configuration Section */
      .config-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .config-item {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-bottom: 12px;
      }

      .config-item input[type="text"] {
        flex: 1;
        padding: 8px 12px;
        font-size: 14px;
      }

      .config-item input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .btn-small {
        padding: 8px 16px;
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .btn-small:hover {
        background: #c82333;
      }

      .btn-add {
        padding: 10px 20px;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s;
        width: 100%;
      }

      .btn-add:hover {
        background: #218838;
      }

      .config-label {
        flex: 1;
        color: #333;
        font-size: 14px;
      }

      .empty-config {
        text-align: center;
        color: #999;
        font-style: italic;
        padding: 20px;
      }

      /* SMS Editor Styles */
      .sms-editor {
        background: white;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
      }

      .editor-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        border-bottom: 2px solid #e0e0e0;
      }

      .editor-tab-btn {
        padding: 8px 16px;
        background: transparent;
        border: none;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        font-weight: 600;
        font-size: 13px;
        color: #666;
        transition: all 0.3s;
        margin-bottom: -2px;
      }

      .editor-tab-btn:hover {
        color: #667eea;
      }

      .editor-tab-btn.active {
        color: #667eea;
        border-bottom-color: #667eea;
      }

      .editor-content {
        display: none;
      }

      .editor-content.active {
        display: block;
      }

      textarea.sms-text-editor {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        resize: vertical;
        min-height: 80px;
        line-height: 1.5;
      }

      textarea.sms-text-editor:focus {
        outline: none;
        border-color: #667eea;
      }

      .sms-url-display {
        padding: 12px;
        background: #f8f9fa;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 12px;
        font-family: "Courier New", monospace;
        color: #666;
        word-break: break-all;
        line-height: 1.6;
      }

      .editor-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .btn-restore {
        padding: 8px 16px;
        background: #ff9800;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .btn-restore:hover {
        background: #f57c00;
      }

      .preview-box {
        background: #e8f5e9;
        border: 2px solid #4caf50;
        border-radius: 8px;
        padding: 12px;
        margin-top: 10px;
      }

      .preview-label {
        font-size: 11px;
        font-weight: 600;
        color: #2e7d32;
        text-transform: uppercase;
        margin-bottom: 6px;
      }

      .preview-text {
        font-size: 14px;
        color: #1b5e20;
        line-height: 1.5;
      }

      /* Responsive */
      @media (max-width: 600px) {
        .container {
          padding: 24px;
        }

        h1 {
          font-size: 20px;
          margin-bottom: 20px;
        }

        .tab-btn {
          font-size: 12px;
          padding: 12px 8px;
        }

        .output-item {
          flex-direction: column;
        }

        .copy-btn {
          width: 100%;
        }

        .config-item {
          flex-wrap: wrap;
        }

        .config-item input[type="checkbox"] {
          order: -1;
        }

        .sms-section {
          padding: 15px;
        }

        .editor-actions {
          flex-direction: column;
        }
      }

      @media (max-width: 400px) {
        .tab-btn {
          font-size: 11px;
          padding: 10px 6px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üõ†Ô∏è Herramientas</h1>

      <!-- Tabs Navigation -->
      <div class="tabs-nav">
        <button class="tab-btn active" data-tab="generator">
          Generador URLs
        </button>
        <button class="tab-btn" data-tab="phone">Arreglar N√∫mero</button>
        <button class="tab-btn" data-tab="config">‚öôÔ∏è Configuraci√≥n</button>
      </div>

      <!-- Tab 1: Generador de URLs -->
      <div id="generator" class="tab-content active">
        <div class="input-group">
          <label for="baseInput">Ingresa el c√≥digo base:</label>
          <input
            type="text"
            id="baseInput"
            placeholder="Ej: a21"
            autocomplete="off"
          />
        </div>

        <div class="output-group">
          <label>Resultados:</label>
          <div id="generatorOutputs"></div>
        </div>
      </div>

      <!-- Tab 2: Arreglar N√∫mero -->
      <div id="phone" class="tab-content">
        <div class="input-group">
          <label for="phoneInput">Ingresa el n√∫mero de tel√©fono:</label>
          <input
            type="text"
            id="phoneInput"
            placeholder="Ej: 1 561-556-5604"
            autocomplete="off"
          />
        </div>

        <div class="output-group">
          <label>N√∫mero limpio:</label>
          <div class="output-item">
            <div class="output-field" id="phoneOutput">-</div>
            <button
              class="copy-btn"
              onclick="copyToClipboard('phoneOutput', this)"
              id="phoneOutputBtn"
              disabled
            >
              Copiar
            </button>
          </div>
        </div>

        <div class="output-group">
          <label>Formato (XXX) XXX-XXXX:</label>
          <div class="output-item">
            <div class="output-field" id="formattedOutput">-</div>
            <button
              class="copy-btn"
              onclick="copyToClipboard('formattedOutput', this)"
              id="formattedOutputBtn"
              disabled
            >
              Copiar
            </button>
          </div>
        </div>

        <!-- Enlace SMS EN (Ingl√©s) -->
        <div class="sms-section en">
          <label>
            <span class="language-badge en">EN</span>
            Enlace SMS EN
          </label>
          <div class="output-item">
            <div class="output-field" id="smsOutputEN">-</div>
            <button
              class="copy-btn"
              onclick="copyToClipboard('smsOutputEN', this)"
              id="smsOutputENBtn"
              disabled
            >
              Copiar
            </button>
          </div>
        </div>

        <!-- Enlace SMS ES (Espa√±ol) -->
        <div class="sms-section es">
          <label>
            <span class="language-badge es">ES</span>
            Enlace SMS ES
          </label>
          <div class="output-item">
            <div class="output-field" id="smsOutputES">-</div>
            <button
              class="copy-btn"
              onclick="copyToClipboard('smsOutputES', this)"
              id="smsOutputESBtn"
              disabled
            >
              Copiar
            </button>
          </div>
        </div>
      </div>

      <!-- Tab 3: Configuraci√≥n -->
      <div id="config" class="tab-content">
        <div class="config-section">
          <label style="margin-bottom: 15px">
            <strong>Sufijos para el Generador de URLs:</strong>
          </label>

          <div id="suffixList"></div>

          <div style="margin-top: 15px">
            <input
              type="text"
              id="newSuffix"
              placeholder="Ej: /sms-mx"
              style="margin-bottom: 10px"
            />
            <button class="btn-add" onclick="addSuffix()">
              ‚ûï Agregar Sufijo
            </button>
          </div>
        </div>

        <!-- SMS Templates Configuration -->
        <div class="config-section" id="smsConfig">
          <label style="margin-bottom: 15px">
            <strong>üì± Plantillas SMS:</strong>
          </label>

          <!-- English Template -->
          <div class="sms-editor">
            <label
              style="
                font-size: 13px;
                color: #0277bd;
                font-weight: 600;
                margin-bottom: 10px;
                display: block;
              "
            >
              <span class="language-badge en">EN</span> Plantilla SMS Ingl√©s
            </label>

            <div class="editor-tabs">
              <button
                class="editor-tab-btn active"
                onclick="switchEditorTab('en', 'text')"
              >
                ‚úèÔ∏è Editar Texto
              </button>
              <button
                class="editor-tab-btn"
                onclick="switchEditorTab('en', 'url')"
              >
                üîó Ver URL
              </button>
            </div>

            <div class="editor-content active" id="en-text">
              <textarea
                class="sms-text-editor"
                id="smsTextEN"
                rows="3"
                placeholder="Escribe el mensaje aqu√≠..."
              ></textarea>
              <div class="preview-box">
                <div class="preview-label">Vista Previa del Mensaje:</div>
                <div class="preview-text" id="previewEN">-</div>
              </div>
            </div>

            <div class="editor-content" id="en-url">
              <div class="sms-url-display" id="urlDisplayEN">-</div>
            </div>

            <div class="editor-actions">
              <button class="btn-restore" onclick="restoreTemplate('en')">
                üîÑ Restaurar Original
              </button>
            </div>
          </div>

          <!-- Spanish Template -->
          <div class="sms-editor">
            <label
              style="
                font-size: 13px;
                color: #e65100;
                font-weight: 600;
                margin-bottom: 10px;
                display: block;
              "
            >
              <span class="language-badge es">ES</span> Plantilla SMS Espa√±ol
            </label>

            <div class="editor-tabs">
              <button
                class="editor-tab-btn active"
                onclick="switchEditorTab('es', 'text')"
              >
                ‚úèÔ∏è Editar Texto
              </button>
              <button
                class="editor-tab-btn"
                onclick="switchEditorTab('es', 'url')"
              >
                üîó Ver URL
              </button>
            </div>

            <div class="editor-content active" id="es-text">
              <textarea
                class="sms-text-editor"
                id="smsTextES"
                rows="3"
                placeholder="Escribe el mensaje aqu√≠..."
              ></textarea>
              <div class="preview-box">
                <div class="preview-label">Vista Previa del Mensaje:</div>
                <div class="preview-text" id="previewES">-</div>
              </div>
            </div>

            <div class="editor-content" id="es-url">
              <div class="sms-url-display" id="urlDisplayES">-</div>
            </div>

            <div class="editor-actions">
              <button class="btn-restore" onclick="restoreTemplate('es')">
                üîÑ Restaurar Original
              </button>
            </div>
          </div>

          <button class="btn-add" onclick="saveAllTemplates()">
            üíæ Guardar Todas las Plantillas
          </button>
        </div>

        <p
          style="
            text-align: center;
            color: #999;
            font-size: 12px;
            margin-top: 20px;
          "
        >
          Los cambios se guardan autom√°ticamente
        </p>
      </div>
    </div>

    <script>
      // Default configuration
      const DEFAULT_SUFFIXES = [
        { value: "/es", active: true },
        { value: "/sms", active: true },
        { value: "/sms-es", active: true },
        { value: "/thank-you", active: true },
        { value: "/gracias", active: true },
        { value: "/terms-conditions", active: true },
        { value: "/privacy-policy", active: true },
        { value: "/terminos-condiciones", active: true },
        { value: "/politica-privacidad", active: true },
      ];

      // Default SMS text (plain text, not encoded)
      const DEFAULT_SMS_TEXT = {
        en: "Hey, I'd like a free design & estimate for my remodeling project.",
        es: "Hola, me gustaria recibir un diseno y estimado gratis para mi proyecto de remodelacion.",
      };

      // Encode text to URL format for SMS body
      function encodeForSMS(text) {
        return encodeURIComponent(text);
      }

      // Decode URL format to plain text
      function decodeFromSMS(encodedText) {
        try {
          return decodeURIComponent(encodedText);
        } catch (e) {
          console.error("Error decoding:", e);
          return encodedText;
        }
      }

      // Build SMS URL from plain text
      function buildSMSURL(phoneNumber, plainText) {
        return `sms:${phoneNumber}?body=${encodeForSMS(plainText)}`;
      }

      // Extract text from SMS URL
      function extractTextFromSMSURL(smsURL) {
        const match = smsURL.match(/body=(.+)$/);
        if (match) {
          return decodeFromSMS(match[1]);
        }
        return "";
      }

      // Load configuration from localStorage
      function loadConfig() {
        const saved = localStorage.getItem("urlGeneratorConfig");
        if (saved) {
          try {
            return JSON.parse(saved);
          } catch (e) {
            console.error("Error loading config:", e);
            return DEFAULT_SUFFIXES;
          }
        }
        return DEFAULT_SUFFIXES;
      }

      // Load SMS text templates
      function loadSMSText() {
        const saved = localStorage.getItem("smsTextTemplates");
        if (saved) {
          try {
            return JSON.parse(saved);
          } catch (e) {
            console.error("Error loading SMS text:", e);
            return DEFAULT_SMS_TEXT;
          }
        }
        return DEFAULT_SMS_TEXT;
      }

      // Save configuration to localStorage
      function saveConfig(config) {
        localStorage.setItem("urlGeneratorConfig", JSON.stringify(config));
      }

      // Save SMS text templates
      function saveSMSText(templates) {
        localStorage.setItem("smsTextTemplates", JSON.stringify(templates));
      }

      // Format phone number as (XXX) XXX-XXXX
      function formatPhoneNumber(number) {
        let cleanNumber = number;
        if (cleanNumber.startsWith("1") && cleanNumber.length === 11) {
          cleanNumber = cleanNumber.substring(1);
        }
        if (cleanNumber.length === 10) {
          return `(${cleanNumber.substring(0, 3)}) ${cleanNumber.substring(
            3,
            6
          )}-${cleanNumber.substring(6)}`;
        }
        return number;
      }

      // Current configuration
      let suffixes = loadConfig();
      let smsText = loadSMSText();
      let lastBaseValue = "";

      // Initialize SMS editors
      function initializeSMSEditors() {
        const textEN = document.getElementById("smsTextEN");
        const textES = document.getElementById("smsTextES");
        const previewEN = document.getElementById("previewEN");
        const previewES = document.getElementById("previewES");
        const urlDisplayEN = document.getElementById("urlDisplayEN");
        const urlDisplayES = document.getElementById("urlDisplayES");

        // Set initial values
        textEN.value = smsText.en;
        textES.value = smsText.es;
        previewEN.textContent = smsText.en;
        previewES.textContent = smsText.es;
        urlDisplayEN.textContent = buildSMSURL("{NUMBER}", smsText.en);
        urlDisplayES.textContent = buildSMSURL("{NUMBER}", smsText.es);

        // Add listeners for real-time preview
        textEN.addEventListener("input", function () {
          previewEN.textContent = this.value;
          urlDisplayEN.textContent = buildSMSURL("{NUMBER}", this.value);
        });

        textES.addEventListener("input", function () {
          previewES.textContent = this.value;
          urlDisplayES.textContent = buildSMSURL("{NUMBER}", this.value);
        });
      }

      // Switch between text and URL view
      function switchEditorTab(lang, tab) {
        // Get the specific editor container
        const editorContainer = document
          .getElementById(`smsText${lang.toUpperCase()}`)
          .closest(".sms-editor");

        // Get tabs and buttons within this specific editor
        const textTab = editorContainer.querySelector(`#${lang}-text`);
        const urlTab = editorContainer.querySelector(`#${lang}-url`);
        const tabButtons = editorContainer.querySelectorAll(".editor-tab-btn");

        // Remove active class from all buttons
        tabButtons.forEach((btn) => btn.classList.remove("active"));

        // Show/hide content and activate correct button
        if (tab === "text") {
          textTab.classList.add("active");
          urlTab.classList.remove("active");
          tabButtons[0].classList.add("active");
        } else {
          textTab.classList.remove("active");
          urlTab.classList.add("active");
          tabButtons[1].classList.add("active");
        }
      }

      // Restore original template
      function restoreTemplate(lang) {
        if (
          confirm(`¬øRestaurar la plantilla original en ${lang.toUpperCase()}?`)
        ) {
          const textarea = document.getElementById(
            `smsText${lang.toUpperCase()}`
          );
          const preview = document.getElementById(
            `preview${lang.toUpperCase()}`
          );
          const urlDisplay = document.getElementById(
            `urlDisplay${lang.toUpperCase()}`
          );

          const originalText = DEFAULT_SMS_TEXT[lang];
          textarea.value = originalText;
          preview.textContent = originalText;
          urlDisplay.textContent = buildSMSURL("{NUMBER}", originalText);

          smsText[lang] = originalText;
          saveSMSText(smsText);
        }
      }

      // Save all templates
      function saveAllTemplates() {
        const textEN = document.getElementById("smsTextEN").value.trim();
        const textES = document.getElementById("smsTextES").value.trim();

        if (!textEN || !textES) {
          alert("Por favor completa ambas plantillas antes de guardar");
          return;
        }

        smsText = { en: textEN, es: textES };
        saveSMSText(smsText);
        alert("‚úÖ Plantillas guardadas correctamente");

        // Update phone output if there's a value
        const phoneInput = document.getElementById("phoneInput");
        if (phoneInput.value.trim()) {
          phoneInput.dispatchEvent(new Event("input"));
        }
      }

      // Tab switching
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const tabId = this.dataset.tab;
          document
            .querySelectorAll(".tab-btn")
            .forEach((b) => b.classList.remove("active"));
          this.classList.add("active");
          document
            .querySelectorAll(".tab-content")
            .forEach((c) => c.classList.remove("active"));
          document.getElementById(tabId).classList.add("active");
        });
      });

      // Render suffix configuration
      function renderSuffixList() {
        const list = document.getElementById("suffixList");
        if (suffixes.length === 0) {
          list.innerHTML =
            '<div class="empty-config">No hay sufijos configurados</div>';
          return;
        }
        list.innerHTML = suffixes
          .map(
            (suffix, index) => `
        <div class="config-item">
          <input type="checkbox" id="suffix-${index}" ${
              suffix.active ? "checked" : ""
            } onchange="toggleSuffix(${index})" />
          <label class="config-label" for="suffix-${index}">
            <code>${suffix.value}</code>
          </label>
          <button class="btn-small" onclick="removeSuffix(${index})">
            Eliminar
          </button>
        </div>
      `
          )
          .join("");
      }

      // Add new suffix
      function addSuffix() {
        const input = document.getElementById("newSuffix");
        const value = input.value.trim();
        if (!value) {
          alert("Por favor ingresa un sufijo");
          return;
        }
        if (suffixes.some((s) => s.value === value)) {
          alert("Este sufijo ya existe");
          return;
        }
        suffixes.push({ value, active: true });
        saveConfig(suffixes);
        renderSuffixList();
        updateGeneratorOutputs();
        input.value = "";
      }

      // Remove suffix
      function removeSuffix(index) {
        if (confirm("¬øEliminar este sufijo?")) {
          suffixes.splice(index, 1);
          saveConfig(suffixes);
          renderSuffixList();
          updateGeneratorOutputs();
        }
      }

      // Toggle suffix active state
      function toggleSuffix(index) {
        suffixes[index].active = !suffixes[index].active;
        saveConfig(suffixes);
        updateGeneratorOutputs();
      }

      // Update generator outputs
      function updateGeneratorOutputs() {
        const baseInput = document.getElementById("baseInput");
        const outputsDiv = document.getElementById("generatorOutputs");
        const baseValue = baseInput.value.trim();
        const activeSuffixes = suffixes.filter((s) => s.active);

        if (baseValue !== lastBaseValue) {
          lastBaseValue = baseValue;
        }

        if (!baseValue || activeSuffixes.length === 0) {
          outputsDiv.innerHTML =
            '<div style="text-align: center; color: #999; font-style: italic; padding: 20px">-</div>';
          return;
        }

        outputsDiv.innerHTML = activeSuffixes
          .map(
            (suffix, index) => `
        <div class="output-item">
          <div class="output-field" id="gen-output-${index}">${baseValue}${suffix.value}</div>
          <button class="copy-btn" id="gen-btn-${index}" onclick="copyToClipboardGen('gen-output-${index}', 'gen-btn-${index}')">
            Copiar
          </button>
        </div>
      `
          )
          .join("");
      }

      // Generator input listener
      const baseInput = document.getElementById("baseInput");
      baseInput.addEventListener("input", updateGeneratorOutputs);

      // Phone number sanitizer
      const phoneInput = document.getElementById("phoneInput");
      const phoneOutput = document.getElementById("phoneOutput");
      const phoneOutputBtn = document.getElementById("phoneOutputBtn");
      const formattedOutput = document.getElementById("formattedOutput");
      const formattedOutputBtn = document.getElementById("formattedOutputBtn");
      const smsOutputEN = document.getElementById("smsOutputEN");
      const smsOutputENBtn = document.getElementById("smsOutputENBtn");
      const smsOutputES = document.getElementById("smsOutputES");
      const smsOutputESBtn = document.getElementById("smsOutputESBtn");

      phoneInput.addEventListener("input", function () {
        const value = this.value.trim();
        if (value) {
          const sanitized = value.replace(/\D/g, "");
          if (sanitized) {
            phoneOutput.textContent = sanitized;
            phoneOutputBtn.disabled = false;

            const formatted = formatPhoneNumber(sanitized);
            formattedOutput.textContent = formatted;
            formattedOutputBtn.disabled = false;

            const smsLinkEN = buildSMSURL(sanitized, smsText.en);
            smsOutputEN.textContent = smsLinkEN;
            smsOutputENBtn.disabled = false;

            const smsLinkES = buildSMSURL(sanitized, smsText.es);
            smsOutputES.textContent = smsLinkES;
            smsOutputESBtn.disabled = false;
          } else {
            resetPhoneOutputs();
          }
        } else {
          resetPhoneOutputs();
        }
      });

      function resetPhoneOutputs() {
        phoneOutput.textContent = "-";
        phoneOutputBtn.disabled = true;
        formattedOutput.textContent = "-";
        formattedOutputBtn.disabled = true;
        smsOutputEN.textContent = "-";
        smsOutputENBtn.disabled = true;
        smsOutputES.textContent = "-";
        smsOutputESBtn.disabled = true;
      }

      // Copy to clipboard for generator
      async function copyToClipboardGen(elementId, buttonId) {
        const element = document.getElementById(elementId);
        const button = document.getElementById(buttonId);
        const text = element.textContent.trim();

        if (!text || text === "-") return;

        try {
          await navigator.clipboard.writeText(text);
          button.textContent = "Copiado";
          button.classList.add("copied");
        } catch (err) {
          fallbackCopy(text, button, "Copiado");
        }
      }

      // Copy to clipboard (standard with timeout)
      async function copyToClipboard(elementId, button) {
        const element = document.getElementById(elementId);
        const text = element.textContent.trim();
        if (!text || text === "-") return;

        try {
          await navigator.clipboard.writeText(text);
          const originalText = button.textContent;
          button.textContent = "¬°Copiado!";
          button.classList.add("copied");
          setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove("copied");
          }, 2000);
        } catch (err) {
          fallbackCopy(text, button, "¬°Copiado!");
        }
      }

      // Fallback copy for older browsers
      function fallbackCopy(text, button, successText) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.opacity = "0";
        document.body.appendChild(textarea);
        textarea.select();
        try {
          document.execCommand("copy");
          const originalText = button.textContent;
          button.textContent = successText;
          button.classList.add("copied");
          if (successText === "¬°Copiado!") {
            setTimeout(() => {
              button.textContent = originalText;
              button.classList.remove("copied");
            }, 2000);
          }
        } catch (err) {
          console.error("Error al copiar:", err);
          alert("No se pudo copiar al portapapeles");
        }
        document.body.removeChild(textarea);
      }

      // Initialize
      renderSuffixList();
      updateGeneratorOutputs();
      initializeSMSEditors();
    </script>
  </body>
</html>
